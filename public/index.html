<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <link rel="stylesheet" type="text/css" href="/styles.css">
</head>
<body>

<div class="container">

    <h2>File System</h2>

    <form action="/download-file">

        <table id="file-table">
            <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Action</th>
            </tr>
        </table>

    </form>

</div>

<script>
    const baseURL = 'http://localhost:1234/info';
    window.addEventListener('load', getInfo);

    async function getInfo() {
        const res = await fetch(baseURL,
            {
                method: 'GET'
            });
        console.log(res);

        const data = await res.json();
        console.log(data);

        for (const item of data) {
            addRow(item.name, item.type, item.url);
        }
    }

    function addRow(name, type, url) {
        var table = document.getElementById("file-table");
        var row = table.insertRow(-1);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        cell1.innerHTML = name;
        cell2.innerHTML = type;

        if (type === "File") {
            cell3.innerHTML = `<button type="submit" name="filename" value="${name}">Download</button>`;
        }
    }
</script>
</body>
</html>